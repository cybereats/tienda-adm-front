<section class="users l-flex l-flex__direction-column">
    <h1 class="c-title">Usuarios</h1>

    <div class="users__controls l-flex l-flex__align-center">
        <c-search-bar class="l-flex__flex-1" placeholder="Buscar por nombre, ID..." [value]="filterText"
            (search)="onSearch($event)"></c-search-bar>

        <div class="users__filters l-flex">
            <c-filter-select placeholder="Todos los roles" [options]="roleFilterOptions" [value]="filterRole"
                (valueChange)="onRoleChange($event)">
            </c-filter-select>

            <c-reset-filters [disabled]="!filterText && !filterRole" (reset)="resetFilters()">
            </c-reset-filters>
        </div>
    </div>
    <table class="table">
        <thead>
            <tr class="table__row table__row--header">
                <th class="table__header-cell">ID</th>
                <th class="table__header-cell">Nombre</th>
                <th class="table__header-cell">Username</th>
                <th class="table__header-cell">Email</th>
                <th class="table__header-cell">Rol</th>
                <th class="table__header-cell">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @for (user of users; track user.id) {
            <tr class="table__row">
                <td class="table__cell">
                    {{ user.id }}
                </td>
                <td class="table__cell">{{ user.name }} {{ user.surname }}</td>
                <td class="table__cell">{{ user.username }}</td>
                <td class="table__cell">{{ user.email }}</td>
                <td class="table__cell">
                    <c-status [status]="user.role" (statusChange)="updateUserRole(user, $any($event))"
                        [options]="roleOptions"></c-status>
                </td>
                <td class="table__cell">
                    <button class="users__btn users__btn--delete" (click)="deleteUser(user.id)">
                        Eliminar
                    </button>
                </td>
            </tr>
            }
        </tbody>
    </table>

    <c-pagination [currentPage]="currentPage" [totalPages]="totalPages" [size]="size" route="/admin/users">
    </c-pagination>
</section>