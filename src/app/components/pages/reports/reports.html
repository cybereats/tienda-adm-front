<section class="reports l-flex l-flex__direction-column">
    <h1 class="c-title">Reportes</h1>

    <div class="reports__summary">
        <c-summary-card title="Total Reportes" [value]="stats.total"></c-summary-card>
        <c-summary-card title="Pendientes" [value]="stats.pending" variant="orange"></c-summary-card>
        <c-summary-card title="En Proceso" [value]="stats.inProgress" variant="blue"></c-summary-card>
        <c-summary-card title="Resueltos" [value]="stats.resolved" variant="green"></c-summary-card>
    </div>



    <div class="reports__controls l-flex l-flex__align-center">
        <c-search-bar class="l-flex__flex-1" placeholder="Buscar por ID, Usuario..." [value]="filterText"
            (search)="onSearch($event)"></c-search-bar>

        <div class="reports__filters l-flex">
            <c-filter-select placeholder="Todos los estados" [options]="statusFilterOptions" [value]="filterStatus"
                (valueChange)="onStatusChange($event)">
            </c-filter-select>

            <input type="date" class="reports__date-input" [value]="filterDate" (change)="onDateChange($event)">

            <c-reset-filters [disabled]="!filterText && !filterStatus && !filterDate" (reset)="resetFilters()">
            </c-reset-filters>
        </div>
    </div>

    <table class="table">
        <thead>
            <tr class="table__row table__row--header">
                <th class="table__header-cell">ID Reporte</th>
                <th class="table__header-cell">Usuario</th>
                <th class="table__header-cell">PC</th>
                <th class="table__header-cell">Asunto</th>
                <th class="table__header-cell">Prioridad</th>
                <th class="table__header-cell">Estado</th>
                <th class="table__header-cell">Fecha</th>
            </tr>
        </thead>
        <tbody>
            @for (report of reports; track report.id) {
            <tr class="table__row">
                <td class="table__cell">
                    <a routerLink="/admin/reports" class="reports__link">{{ report.id }}</a>
                </td>
                <td class="table__cell">{{ report.user.name }}</td>
                <td class="table__cell">{{ report.pc.label }}</td>
                <td class="table__cell table__cell--subject">{{ report.subject }}</td>
                <td class="table__cell">{{ report.priority }}</td>
                <td class="table__cell">
                    <c-status [status]="report.status" (statusChange)="updateReportStatus(report, $event)"
                        [options]="statusOptions"></c-status>
                </td>
                <td class="table__cell">{{ report.createdAt }}</td>
            </tr>
            }
        </tbody>
    </table>

    <c-pagination [currentPage]="currentPage" [totalPages]="totalPages" [size]="size" route="/admin/reports">
    </c-pagination>
</section>